
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../../images/isecl-logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.5">
    
    
      
        <title>Deploy - Intel® SecL-DC</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.15aa0b43.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.75751829.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Palantino:300,400,400i,700%7CFira+Code&display=fallback">
        <style>body,input{font-family:"Palantino",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Fira Code",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploy" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../.." title="Intel® SecL-DC" class="md-header-nav__button md-logo" aria-label="Intel® SecL-DC">
      
  <img src="../../../images/isecl-logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Intel® SecL-DC
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Deploy
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://raghav19.github.io/docs" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    intel-secl/intel-secl
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Welcome to Intel® SecL-DC
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../pre-reqs/" class="md-tabs__link md-tabs__link--active">
        Quick Start Guide
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../product-guide/Product%20Guide%20-%20Intel%C2%AE%20Security%20Libraries%20-%20Datacenter%20Foundational%20Security/" class="md-tabs__link">
        Product Guide
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Intel® SecL-DC" class="md-nav__button md-logo" aria-label="Intel® SecL-DC">
      
  <img src="../../../images/isecl-logo.png" alt="logo">

    </a>
    Intel® SecL-DC
  </label>
  
    <div class="md-nav__source">
      
<a href="https://raghav19.github.io/docs" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    intel-secl/intel-secl
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Welcome to Intel® SecL-DC
      </a>
    </li>
  

    
      
      
      


  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
      
      <label class="md-nav__link" for="nav-2">
        Quick Start Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Quick Start Guide" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          Quick Start Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1" checked>
      
      <label class="md-nav__link" for="nav-2-1">
        Foundational & Workload
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Foundational & Workload" data-md-level="2">
        <label class="md-nav__title" for="nav-2-1">
          <span class="md-nav__icon md-icon"></span>
          Foundational & Workload
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../pre-reqs/" class="md-nav__link">
        Pre-requisites
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../build/" class="md-nav__link">
        Build
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Deploy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Deploy
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    Pre-requisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-the-ansible-role" class="md-nav__link">
    Download the Ansible Role
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usecase-setup-options" class="md-nav__link">
    Usecase Setup Options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-ansible-inventory" class="md-nav__link">
    Update Ansible Inventory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-and-run-playbook" class="md-nav__link">
    Create and Run Playbook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-examples-tips" class="md-nav__link">
    Additional Examples &amp; Tips
  </a>
  
    <nav class="md-nav" aria-label="Additional Examples &amp; Tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tpm-is-already-owned" class="md-nav__link">
    TPM is already owned
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uefi-secureboot-enabled" class="md-nav__link">
    UEFI SecureBoot enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-docker-notary" class="md-nav__link">
    Using Docker Notary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-case-of-misconfigurations" class="md-nav__link">
    In case of Misconfigurations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workflows/" class="md-nav__link">
        Workflows
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/" class="md-nav__link">
        Appendix
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2" >
      
      <label class="md-nav__link" for="nav-2-2">
        Secure Key Caching
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Secure Key Caching" data-md-level="2">
        <label class="md-nav__title" for="nav-2-2">
          <span class="md-nav__icon md-icon"></span>
          Secure Key Caching
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../secure_key_caching/pre-reqs/" class="md-nav__link">
        Pre-requisites
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../secure_key_caching/build/" class="md-nav__link">
        Build
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../secure_key_caching/deploy/" class="md-nav__link">
        Deploy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../secure_key_caching/workflows/" class="md-nav__link">
        Workflows
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../secure_key_caching/appendix/" class="md-nav__link">
        Appendix
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      


  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
      
      <label class="md-nav__link" for="nav-3">
        Product Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Product Guide" data-md-level="1">
        <label class="md-nav__title" for="nav-3">
          <span class="md-nav__icon md-icon"></span>
          Product Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guide/Product%20Guide%20-%20Intel%C2%AE%20Security%20Libraries%20-%20Datacenter%20Foundational%20Security/" class="md-nav__link">
        Intel® Security Libraries - Datacenter Foundational Security
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../product-guide/Product%20Guide%20-%20Intel%C2%AE%20Security%20Libraries%20-%20Secure%20Key%20Caching/" class="md-nav__link">
        Intel® Security Libraries - Datacenter SGX Attestation Infrastructure and Secure Key Caching
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="deploy">Deploy</h1>
<p>The below details would enable the deployment through Ansible Role for Intel® SecL-DC Foundational &amp; Workload Security Usecases. However the services can still be installed manually using the Product Guide. More details on Ansible Role for Intel® SecL-DC in <a href="https://github.com/intel-secl/utils/tree/v3.3.1/develop/tools/ansible-role">Ansible-Role</a> repository.</p>
<h2 id="pre-requisites">Pre-requisites</h2>
<ul>
<li>The Ansible Server is required to use this role to deploy Intel® SecL-DC services based on the supported deployment model. The Ansible server is recommended to be installed on the Build machine itself. </li>
<li>
<p>The role has been tested with Ansible Version <code>2.9.10</code></p>
</li>
<li>
<p>Install Ansible on Build Machine</p>
</li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>pip3 install <span class="nv">ansible</span><span class="o">==</span><span class="m">2</span>.9.10
</code></pre></div>
</td></tr></table>
<ul>
<li>Install <code>epel-release</code> repository and install <code>sshpass</code> for ansible to connect to remote hosts using SSH</li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
dnf install sshpass
</code></pre></div>
</td></tr></table>
<ul>
<li>Create directory for ansible default configuration and hosts file</li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>mkdir -p /etc/ansible/
touch /etc/ansible/ansible.cfg
</code></pre></div>
</td></tr></table>
<ul>
<li>Copy the default <code>ansible.cfg</code> contents from <a href="https://raw.githubusercontent.com/ansible/ansible/v2.9.10/examples/ansible.cfg">https://raw.githubusercontent.com/ansible/ansible/v2.9.10/examples/ansible.cfg</a> and paste it under <code>/etc/ansible/ansible.cfg</code></li>
</ul>
<h2 id="download-the-ansible-role">Download the Ansible Role</h2>
<p>The role can be cloned locally from git and the contents can be copied to the roles folder used by your ansible server </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">#Create directory for using ansible deployment</span>
mkdir -p /root/intel-secl/deploy/

<span class="c1">#Clone the repository</span>
<span class="nb">cd</span> /root/intel-secl/deploy/ <span class="o">&amp;&amp;</span> git clone https://github.com/intel-secl/utils.git

<span class="c1">#Checkout to specific release-version</span>
<span class="nb">cd</span> utils/
git checkout &lt;release-version of choice&gt;
<span class="nb">cd</span> tools/ansible-role

<span class="c1">#Update ansible.cfg roles_path to point to path(/root/intel-secl/deploy/utils/tools/)</span>
</code></pre></div>
</td></tr></table>
<h2 id="usecase-setup-options">Usecase Setup Options</h2>
<table>
<thead>
<tr>
<th>Usecase</th>
<th>Variable</th>
</tr>
</thead>
<tbody>
<tr>
<td>Host Attestation</td>
<td><code>setup: host-attestation</code> in playbook or via <code>--extra-vars</code> as <code>setup=host-attestation</code> in CLI</td>
</tr>
<tr>
<td>Application Integrity</td>
<td><code>setup: application-integrity</code> in playbook or via <code>--extra-vars</code> as <code>setup=application-integrity</code> in CLI</td>
</tr>
<tr>
<td>Data Fencing &amp; Asset Tags</td>
<td><code>setup: data-fencing</code> in playbook or via <code>--extra-vars</code> as <code>setup=data-fencing</code> in CLI</td>
</tr>
<tr>
<td>Trusted Workload Placement - VM</td>
<td><code>setup: trusted-workload-placement-vm</code> in playbook or via <code>--extra-vars</code> as <code>setup=trusted-workload-placement-vm</code> in CLI</td>
</tr>
<tr>
<td>Trusted Workload Placement - Containers</td>
<td><code>setup: trusted-workload-placement-containers</code> in playbook or via <code>--extra-vars</code> as <code>setup=trusted-workload-placement-containers</code> in CLI</td>
</tr>
<tr>
<td>Launch Time Protection - VM Confidentiality</td>
<td><code>setup: workload-conf-vm</code> in playbook or via <code>--extra-vars</code> as <code>setup=workload-conf-vm</code> in CLI</td>
</tr>
<tr>
<td>Launch Time Protection - Container Confidentiality with Docker Runtime</td>
<td><code>setup: workload-conf-containers-docker</code> in playbook or via <code>--extra-vars</code> as <code>setup=workload-conf-containers-docker</code>in CLI</td>
</tr>
<tr>
<td>Launch Time Protection - Container Confidentiality with CRIO Runtime</td>
<td><code>setup: workload-conf-containers-crio</code> in playbook or via <code>--extra-vars</code> as <code>setup=workload-conf-containers-crio</code>in CLI</td>
</tr>
</tbody>
</table>
<details class="note" open="open"><summary>Note</summary><p>Orchestrator installation is not bundled with the role and need to be done independently. Also, components dependent on the orchestrator like <code>isecl-k8s-extensions</code> and <code>integration-hub</code> are installed either partially or not installed</p>
</details>
<details class="note" open="open"><summary>Note</summary><p><code>Key Broker Service</code> is not configured with KMIP compliant KMS when installing through ansible role  </p>
</details>
<h2 id="update-ansible-inventory">Update Ansible Inventory</h2>
<p>In order to deploy Intel® SecL-DC binaries, the following inventory can be used and the required inventory vars as below need to be set. The below example inventory can be created under <code>/etc/ansible/hosts</code></p>
<div class="highlight"><pre><span></span><code>[CSP]
&lt;machine1_ip/hostname&gt;

[Enterprise]
&lt;machine2_ip/hostname&gt;

[Node]
&lt;machine3_ip/hostname&gt;

[CSP:vars]
isecl_role=csp
ansible_user=root
ansible_password=&lt;password&gt;

[Enterprise:vars]
isecl_role=enterprise
ansible_user=root
ansible_password=&lt;password&gt;

[Node:vars]
isecl_role=node
ansible_user=root
ansible_password=&lt;password&gt;
</code></pre></div>
<details class="note" open="open"><summary>Note</summary><p>Ansible requires <code>ssh</code> and <code>root</code> user access to remote machines. The following command can be used to ensure ansible can connect to remote machines with host key check. Ensure the existing keys of the machines are cleared to enable fresh keyscan.
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>ssh-keyscan -H &lt;ip_address/hostname&gt; &gt;&gt; /root/.ssh/known_hosts
</code></pre></div>
</td></tr></table></p>
</details>
<h2 id="create-and-run-playbook">Create and Run Playbook</h2>
<p>The following are playbook and CLI example for deploying Intel® SecL-DC binaries based on the supported deployment models and usecases. The below example playbooks can be created as <code>site-bin-isecl.yml</code></p>
<details class="note" open="open"><summary>Note</summary><p>If running behind a proxy, update the proxy variables under <code>vars/main.yml</code> and run as below</p>
</details>
<details class="note" open="open"><summary>Note</summary><p>Go through the <code>Additional Examples and Tips</code> section for specific workflow samples</p>
</details>
<p><strong>Option 1</strong></p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">hosts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span>
  <span class="nt">gather_facts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
  <span class="nt">any_errors_fatal</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">setup</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;setup var from supported usecases&gt;</span>
    <span class="nt">binaries_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;path where built binaries are copied to&gt;</span>
  <span class="nt">roles</span><span class="p">:</span>   
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ansible-role</span>
  <span class="nt">environment</span><span class="p">:</span>
    <span class="nt">http_proxy</span><span class="p">:</span> <span class="s">&quot;{{http_proxy}}&quot;</span>
    <span class="nt">https_proxy</span><span class="p">:</span> <span class="s">&quot;{{https_proxy}}&quot;</span>
    <span class="nt">no_proxy</span><span class="p">:</span> <span class="s">&quot;{{no_proxy}}&quot;</span>
</code></pre></div>
<p>and</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>ansible-playbook &lt;playbook-name&gt;
</code></pre></div>
</td></tr></table>
<p>OR</p>
<p><strong>Option 2:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">hosts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span>
  <span class="nt">gather_facts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
  <span class="nt">any_errors_fatal</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">roles</span><span class="p">:</span>   
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ansible-role</span>
  <span class="nt">environment</span><span class="p">:</span>
    <span class="nt">http_proxy</span><span class="p">:</span> <span class="s">&quot;{{http_proxy}}&quot;</span>
    <span class="nt">https_proxy</span><span class="p">:</span> <span class="s">&quot;{{https_proxy}}&quot;</span>
    <span class="nt">no_proxy</span><span class="p">:</span> <span class="s">&quot;{{no_proxy}}&quot;</span>
</code></pre></div>
<p>and</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>ansible-playbook &lt;playbook-name&gt; <span class="se">\</span>
--extra-vars <span class="nv">setup</span><span class="o">=</span>&lt;setup var from supported usecases&gt; <span class="se">\</span>
--extra-vars <span class="nv">binaries_path</span><span class="o">=</span>&lt;path where built binaries are copied to&gt;
</code></pre></div>
</td></tr></table>
<h2 id="additional-examples-tips">Additional Examples &amp; Tips</h2>
<h3 id="tpm-is-already-owned">TPM is already owned</h3>
<p>If the Trusted Platform Module(TPM) is already owned, the owner secret(SRK) can be provided directly during runtime in the playbook:</p>
<p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>ansible-playbook &lt;playbook-name&gt; <span class="se">\</span>
--extra-vars <span class="nv">setup</span><span class="o">=</span>&lt;setup var from supported usecases&gt; <span class="se">\</span>
--extra-vars <span class="nv">binaries_path</span><span class="o">=</span>&lt;path where built binaries are copied to&gt; <span class="se">\</span>
--extra-vars <span class="nv">tpm_secret</span><span class="o">=</span>&lt;tpm owner secret&gt;
</code></pre></div>
</td></tr></table>
or</p>
<p>Update the following vars in <code>defaults/main.yml</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># The TPM Storage Root Key(SRK) Password to be used if TPM is already owned</span>
<span class="nt">tpm_owner_secret</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;tpm_secret&gt;</span>
</code></pre></div>
<h3 id="uefi-secureboot-enabled">UEFI SecureBoot enabled</h3>
<p>If UEFI mode and UEFI SecureBoot feature is enabled, the following option can be used to during runtime in the playbook</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>ansible-playbook &lt;playbook-name&gt; <span class="se">\</span>
--extra-vars <span class="nv">setup</span><span class="o">=</span>&lt;setup var from supported usecases&gt; <span class="se">\</span>
--extra-vars <span class="nv">binaries_path</span><span class="o">=</span>&lt;path where built binaries are copied to&gt; <span class="se">\</span>
--extra-vars <span class="nv">uefi_secureboot</span><span class="o">=</span>yes <span class="se">\</span>
-- extra-vars <span class="nv">grub_file_path</span><span class="o">=</span>&lt;uefi mode grub file path&gt;
</code></pre></div>
</td></tr></table>
<p>or</p>
<p>Update the following vars in <code>defaults/main.yml</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Enable/disable for UEFI SecureBoot Mode</span>
<span class="c1"># [yes - UEFI SecureBoot mode, no - Legacy mode]</span>
<span class="nt">uefi_secureboot</span><span class="p">:</span> <span class="s">&#39;yes&#39;</span>

<span class="c1"># The grub file path for Legacy mode &amp; UEFI Mode. Default is Legacy mode path. Update the below path for UEFI mode with UEFI SecureBoot</span>
<span class="nt">grub_file_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;uefi mode grub file path&gt;</span>
</code></pre></div>
<h3 id="using-docker-notary">Using Docker Notary</h3>
<p>If using Docker notary when working with <code>Launch Time Protection - Workload Confidentiality with Docker Runtime</code>, following options can be provided during runtime in the playbook</p>
<p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>ansible-playbook &lt;playbook-name&gt; <span class="se">\</span>
--extra-vars <span class="nv">setup</span><span class="o">=</span>&lt;setup var from supported usecases&gt; <span class="se">\</span>
--extra-vars <span class="nv">binaries_path</span><span class="o">=</span>&lt;path where built binaries are copied to&gt; <span class="se">\</span>
--extra-vars <span class="nv">insecure_verify</span><span class="o">=</span>&lt;insecure_verify<span class="o">[</span>TRUE/FALSE<span class="o">]</span>&gt; <span class="se">\</span>
--extra-vars <span class="nv">registry_ipaddr</span><span class="o">=</span>&lt;registry ipaddr&gt; <span class="se">\</span>
--extra-vars <span class="nv">registry_scheme</span><span class="o">=</span>&lt;registry scheme<span class="o">[</span>http/https<span class="o">]</span>&gt;
</code></pre></div>
</td></tr></table>
or</p>
<p>Update the following vars in <code>defaults/main.yml</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># [TRUE/FALSE based on registry configured with http/https respectively]</span>
<span class="c1"># Required for Workload Integrity with containers</span>
<span class="nt">insecure_skip_verify</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;insecure_skip_verify&gt;</span>

<span class="c1"># The registry IP for the Docker registry from where container images are pulled</span>
<span class="c1"># Required for Workload Integrity with containers</span>
<span class="nt">registry_ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;registry_ipaddr&gt;</span>

<span class="c1"># The registry protocol for talking to the remote registry [http/https]</span>
<span class="c1"># Required for Workload Integrity with containers</span>
<span class="nt">registry_scheme_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;registry_scheme&gt;</span>
</code></pre></div>
<h3 id="in-case-of-misconfigurations">In case of Misconfigurations</h3>
<p>If any service installation fails due to any misconfiguration, just uninstall the specific service manually , fix the misconfiguration in ansible and rerun the playbook. The successfully installed services wont be reinstalled.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../build/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Build
              </div>
            </div>
          </a>
        
        
          <a href="../workflows/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Workflows
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.93c04032.min.js"></script>
      <script src="../../../assets/javascripts/bundle.83e5331e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: ['navigation.tabs', 'navigation.tabs.sticky', 'navigation.instant', 'toc.integrate'],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>